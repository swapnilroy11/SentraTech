"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[554],{3554:(e,t,o)=>{o.d(t,{DASHBOARD_CONFIG:()=>T,generateOfflineResponse:()=>b,hasNetwork:()=>_,logPayload:()=>w,safeSubmit:()=>h,showSuccessMessage:()=>P,submitChatMessageWithRateLimit:()=>O,submitFormToDashboard:()=>S,submitFormWithRateLimit:()=>y});var n=o(9379);function s(e){return new Promise((t,o)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>o(e.error)})}function a(e,t){let o;return(n,a)=>(()=>{if(o)return o;const n=indexedDB.open(e);return n.onupgradeneeded=()=>n.result.createObjectStore(t),o=s(n),o.then(e=>{e.onclose=()=>o=void 0},()=>{}),o})().then(e=>a(e.transaction(t,n).objectStore(t)))}let r;function i(){return r||(r=a("keyval-store","keyval")),r}function c(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:i())("readonly",t=>s(t.get(e)))}function l(e,t){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:i())("readwrite",o=>(o.put(t,e),s(o.transaction)))}function u(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:i())("readwrite",t=>(t.delete(e),s(t.transaction)))}function d(e,t){return e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},s(e.transaction)}const m={"demo-request":5e3,"roi-calculator":1e4,newsletter:3e3,"contact-sales":5e3,"job-application":7e3,"pilot-request":5e3,"chat-message":3e3},g={},p={},h=async function(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{disableDuration:n=5e3,onSubmitStart:s=null,onSubmitEnd:a=null,onDuplicate:r=null}=o;if(p[e])return console.warn("\u26a0\ufe0f ".concat(e," is already submitting. Blocking duplicate submission.")),r&&r(),{success:!1,reason:"duplicate_submission",message:"Form is already being submitted"};p[e]=!0,console.log("\ud83d\udd12 ".concat(e," submission started - blocking duplicates")),s&&s();try{const o=await y(e,t);return console.log("\u2705 ".concat(e," submitted successfully via safe submit")),o}catch(i){throw console.error("\u274c ".concat(e," submission error:"),i),i}finally{setTimeout(()=>{p[e]=!1,console.log("\ud83d\udd13 ".concat(e," submission re-enabled after ").concat(n,"ms")),a&&a()},n)}},f="https://tech-site-boost.preview.emergentagent.com";const w=(e,t)=>{console.log("\ud83d\udce4 [".concat(e.toUpperCase(),"] Sending payload:"),JSON.stringify(t,null,2)),console.log("\ud83d\udd0d [".concat(e.toUpperCase(),"] Payload summary:"),{totalFields:Object.keys(t).length,requiredFields:Object.entries(t).filter(e=>{let[t,o]=e;return o&&""!==o}).length,emptyFields:Object.entries(t).filter(e=>{let[t,o]=e;return!o||""===o}).map(e=>{let[t]=e;return t}),timestamp:(new Date).toLocaleString()})},T={ENDPOINTS:{CONTACT_SALES:"/api/proxy/contact-sales",DEMO_REQUEST:"/api/proxy/demo-request",ROI_CALCULATOR:"/api/proxy/roi-calculator",NEWSLETTER:"/api/proxy/newsletter-signup",JOB_APPLICATION:"/api/proxy/job-application",PILOT_REQUEST:"/api/proxy/pilot-request",CHAT_MESSAGE:"/api/proxy/chat-message"},HEALTHCHECK_URL:"/api/health",DASHBOARD_API:{BASE_URL:"https://sentratech.net/api/proxy",ENDPOINTS:{CONTACT_SALES:"/forms/contact-sales",DEMO_REQUEST:"/forms/demo-request",ROI_CALCULATOR:"/forms/roi-calculator",NEWSLETTER:"/forms/newsletter-signup",JOB_APPLICATION:"/forms/job-application",PILOT_REQUEST:"/forms/pilot-request",CHAT_MESSAGE:"/chat/message"}},INGEST_KEY:"a0d3f2b6c9e4d1784a92f3c1b5e6d0aa7c18e2f49b35c6d7e8f0a1b2c3d4e5f6",TIMEOUT:{DEFAULT:1e4,CHAT:15e3},RETRY:{MAX_ATTEMPTS:2,DELAY:1e3}},E=async()=>{var e;console.log("\ud83d\udd2c COMPREHENSIVE NETWORK ENVIRONMENT DEBUGGING"),console.log("=".repeat(60)),console.log("\ud83d\udcca Environment Info:",{userAgent:navigator.userAgent,origin:window.location.origin,href:window.location.href,cookieEnabled:navigator.cookieEnabled,onLine:navigator.onLine,language:navigator.language});const t=[window.location.origin,(null===(e="https://tech-site-boost.preview.emergentagent.com")?void 0:e.replace("/api",""))||"https://sentratech.net","http://localhost:3000","http://localhost",null];console.log("\ud83c\udf10 Testing different Origin headers...");for(const n of t)try{const e={"Cache-Control":"no-cache",Pragma:"no-cache"};n&&(e.Origin=n);const t=await fetch("".concat(f,"/health"),{method:"GET",cache:"no-cache",headers:e});console.log('\u2705 Origin "'.concat(n,'": ').concat(t.status," ").concat(t.statusText),{corsHeaders:{allowOrigin:t.headers.get("access-control-allow-origin"),allowMethods:t.headers.get("access-control-allow-methods"),allowHeaders:t.headers.get("access-control-allow-headers"),allowCredentials:t.headers.get("access-control-allow-credentials")}})}catch(o){console.error('\u274c Origin "'.concat(n,'": ').concat(o.message))}console.log("\ud83d\udd0d Testing CORS preflight (OPTIONS)...");try{const e=await fetch("".concat(f,"/forms/newsletter-signup"),{method:"OPTIONS",headers:{Origin:window.location.origin,"Access-Control-Request-Method":"POST","Access-Control-Request-Headers":"content-type,origin"}});console.log("\u2705 CORS Preflight:",{status:e.status,statusText:e.statusText,headers:Object.fromEntries(e.headers.entries())})}catch(o){console.error("\u274c CORS Preflight failed:",o.message)}if("serviceWorker"in navigator){const e=await navigator.serviceWorker.getRegistrations();console.log("\ud83d\udd27 Service Worker status:",{supported:!0,registrations:e.length,active:e.map(e=>{var t;return{scope:e.scope,state:null===(t=e.active)||void 0===t?void 0:t.state,updateViaCache:e.updateViaCache}})})}else console.log("\ud83d\udd27 Service Worker: Not supported");return console.log("=".repeat(60)),!0},_=async()=>{try{var e,t;console.log("\ud83d\udd0d Probing network connectivity..."),await E();const o=new AbortController,n=setTimeout(()=>o.abort(),5e3),s=window.location.origin,a=s.includes("localhost"),r=(null===(e="https://tech-site-boost.preview.emergentagent.com")?void 0:e.replace("/api",""))||"https://sentratech.net",i=a?r:s;console.log("\ud83c\udfaf Browser origin: ".concat(s)),console.log("\ud83c\udf10 Network origin: ".concat(i," ").concat(a?"(localhost\u2192preview mapping)":"(production)"));const c="undefined"!==typeof process&&null!==(t={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BACKEND_URL:"https://tech-site-boost.preview.emergentagent.com",REACT_APP_API_BASE:"https://sentratech.net/api/proxy",REACT_APP_WS_URL:"wss://admin.sentratech.net/ws",REACT_APP_SITE_DOMAIN:"sentratech.net",REACT_APP_SITE_BASEURL:"/",REACT_APP_API_DEV_URL:"http://localhost:8001"})&&void 0!==t&&t.REACT_APP_BACKEND_URL?"https://tech-site-boost.preview.emergentagent.com":window.location.origin,l="".concat(c).concat(T.HEALTHCHECK_URL),u=await fetch(l,{method:"GET",cache:"no-cache",signal:o.signal,headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Origin:s}});clearTimeout(n);const d=u.ok||u.status>=400&&u.status<500;return console.log("\ud83c\udf10 Network connectivity probe result: ".concat(d?"\u2705 ONLINE":"\u274c OFFLINE"," (").concat(u.status,")")),d}catch(o){return console.log("\ud83c\udf10 Network connectivity probe failed: \u274c OFFLINE (".concat(o.message,")")),!1}},A=()=>(console.warn("\u26a0\ufe0f isOnline() is deprecated - use hasNetwork() for reliable connectivity detection"),navigator.onLine),S=async function(e,t){var o,s,a,r;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{timeout:c=T.TIMEOUT.DEFAULT,retries:l=T.RETRY.MAX_ATTEMPTS}=i,u="undefined"!==typeof process&&null!==(o={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BACKEND_URL:"https://tech-site-boost.preview.emergentagent.com",REACT_APP_API_BASE:"https://sentratech.net/api/proxy",REACT_APP_WS_URL:"wss://admin.sentratech.net/ws",REACT_APP_SITE_DOMAIN:"sentratech.net",REACT_APP_SITE_BASEURL:"/",REACT_APP_API_DEV_URL:"http://localhost:8001"})&&void 0!==o&&o.REACT_APP_BACKEND_URL?"https://tech-site-boost.preview.emergentagent.com":window.location.origin;console.log("\ud83c\udfaf BACKEND PROXY SUBMISSION:",{endpoint:e,backendUrl:u,data:t,timestamp:(new Date).toISOString()});let d=null;for(let n=1;n<=l;n++)try{const o=new AbortController,s=setTimeout(()=>o.abort(),c),a="".concat(u).concat(e),r=window.location.origin;console.log("\ud83c\udf10 BACKEND PROXY SUBMISSION (attempt ".concat(n,"/").concat(l,"):"),{url:a,method:"POST",data:JSON.stringify(t,null,2),browserOrigin:r,backendUrl:u,proxyEndpoint:e,timestamp:(new Date).toISOString()}),console.log("\ud83d\udc1b CURL EQUIVALENT:",'curl -X POST "'.concat(a,'" -H "Content-Type: application/json" -H "Origin: ').concat(r,"\" -d '").concat(JSON.stringify(t),"'"));const i=await fetch(a,{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json",Origin:r},body:JSON.stringify(t),signal:o.signal});if(clearTimeout(s),console.log("\ud83d\udce1 Network response received:",{status:i.status,statusText:i.statusText,headers:Object.fromEntries(i.headers.entries()),url:i.url}),!i.ok){const e=await i.text();throw console.error("\u274c HTTP Error ".concat(i.status,":"),e),new Error("HTTP ".concat(i.status,": ").concat(i.statusText," - ").concat(e))}const d=await i.json();return console.log("\u2705 Network submission successful:",d),{success:!0,data:d,mode:"network",attempt:n}}catch(g){d=g,console.error("\u274c Network submission attempt ".concat(n,"/").concat(l," failed:"),{error:g.message,name:g.name,stack:g.stack}),n<l&&await new Promise(e=>setTimeout(e,T.RETRY.DELAY))}console.error("\ud83d\udea8 NETWORK SUBMISSION FAILED - All attempts failed:",{endpoint:e,attempts:l,lastError:null===(s=d)||void 0===s?void 0:s.message,stack:null===(a=d)||void 0===a?void 0:a.stack,data:JSON.stringify(t,null,2)});const m=await v(e,t,i.formType||"unknown");return{success:!0,data:(0,n.A)((0,n.A)({},t),{},{id:"fallback_".concat(Date.now()),queueKey:m}),mode:"fallback",error:null===(r=d)||void 0===r?void 0:r.message}},y=async function(e,t){var o;let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=Date.now(),r="".concat(e,"_").concat(t.email||"anon"),i=null!==(o=m[e])&&void 0!==o?o:5e3;if(g[r]&&a-g[r]<i){const t=Math.ceil((i-(a-g[r]))/1e3);return console.warn("\u26a0\ufe0f ".concat(e," rate limited: please wait ").concat(t,"s before submitting again")),{success:!1,reason:"rate_limited",remainingTime:t,message:"Please wait ".concat(t," seconds before submitting again")}}g[r]=a;const c={"demo-request":T.ENDPOINTS.DEMO_REQUEST,"roi-calculator":T.ENDPOINTS.ROI_CALCULATOR,newsletter:T.ENDPOINTS.NEWSLETTER,"contact-sales":T.ENDPOINTS.CONTACT_SALES,"job-application":T.ENDPOINTS.JOB_APPLICATION,"pilot-request":T.ENDPOINTS.PILOT_REQUEST,"chat-message":T.ENDPOINTS.CHAT_MESSAGE}[e];if(!c)return console.error("\u274c Unknown form type: ".concat(e)),{success:!1,reason:"invalid_form_type",message:"Unknown form type: ".concat(e)};try{const o=await S(c,t,(0,n.A)((0,n.A)({},s),{},{formType:e}));return console.log("\u2705 Rate-limited ".concat(e," submission successful:"),{formType:e,email:t.email,mode:o.mode,rateLimit:"".concat(i,"ms")}),o}catch(l){throw delete g[r],l}},O=async function(e){var t;let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=Date.now(),s="chat-message_".concat(o||"anon"),a=null!==(t=m["chat-message"])&&void 0!==t?t:3e3;if(g[s]&&n-g[s]<a){const e=Math.ceil((a-(n-g[s]))/1e3);return console.warn("\u26a0\ufe0f Chat rate limited: please wait ".concat(e,"s before sending another message")),{success:!1,reason:"rate_limited",remainingTime:e,message:"Please wait ".concat(e," seconds before sending another message")}}g[s]=n;try{const t=await C(e,o);return console.log("\u2705 Rate-limited chat message successful:",{conversationId:o,mode:t.mode,rateLimit:"".concat(a,"ms")}),t}catch(r){throw delete g[s],r}},C=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{if(!await _())return console.warn("\ud83c\udf10 Chat: Network connectivity probe failed - using offline response"),b(e)}catch(n){return console.warn("\ud83c\udf10 Chat: Network probe error - using offline response:",n.message),b(e)}try{var o;const n=new AbortController,s=setTimeout(()=>n.abort(),T.TIMEOUT.CHAT),a="undefined"!==typeof process&&null!==(o={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BACKEND_URL:"https://tech-site-boost.preview.emergentagent.com",REACT_APP_API_BASE:"https://sentratech.net/api/proxy",REACT_APP_WS_URL:"wss://admin.sentratech.net/ws",REACT_APP_SITE_DOMAIN:"sentratech.net",REACT_APP_SITE_BASEURL:"/",REACT_APP_API_DEV_URL:"http://localhost:8001"})&&void 0!==o&&o.REACT_APP_BACKEND_URL?"https://tech-site-boost.preview.emergentagent.com":window.location.origin,r="".concat(a).concat(T.ENDPOINTS.CHAT_MESSAGE),i=await fetch(r,{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json",Origin:window.location.origin},body:JSON.stringify({message:e,conversation_id:t,timestamp:(new Date).toISOString()}),signal:n.signal});if(clearTimeout(s),!i.ok)throw new Error("HTTP ".concat(i.status,": ").concat(i.statusText));const c=await i.json();return{success:!0,response:c.response,conversationId:c.conversation_id,mode:"network"}}catch(s){return console.warn("Chat network submission failed, using offline response:",s.message),b(e)}},b=e=>{const t=["Thank you for your message! Our AI system will help you find the right solution. Since we're currently offline, here's some general guidance.","I understand you're looking for information about SentraTech. While our full AI system is temporarily unavailable, I can share that we specialize in intelligent customer support automation.","Thanks for reaching out! SentraTech offers AI-powered customer support solutions that can transform your business operations. Our team will follow up with detailed information soon.","I appreciate your interest in our services. SentraTech provides cutting-edge AI solutions for customer support, including automated triage, sentiment analysis, and intelligent routing.","Hello! While our real-time AI system is momentarily offline, I want you to know that SentraTech helps businesses automate up to 70% of their customer interactions while maintaining quality."],o=e.toLowerCase();let n=t[0];return n=o.includes("pricing")||o.includes("cost")||o.includes("price")?"For pricing information, please check our pricing page or contact our sales team. We offer flexible plans starting from our Starter package.":o.includes("demo")||o.includes("trial")?"I'd love to show you a demo! Please fill out our demo request form and our team will schedule a personalized walkthrough of SentraTech's capabilities.":o.includes("integration")||o.includes("api")?"SentraTech integrates seamlessly with popular CRMs, help desk systems, and communication platforms. Our API documentation and integration team make setup straightforward.":o.includes("support")||o.includes("help")?"Our support team is here to help! You can reach us through live chat, email at support@sentratech.net, or phone. We offer 24/7 support for Enterprise customers.":t[Math.floor(Math.random()*t.length)],{success:!0,response:n,conversationId:"offline_".concat(Date.now()),mode:"offline"}},P=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;console.log("\u2705 Form submission successful:",e,t),window&&window.dataLayer&&window.dataLayer.push({event:"form_submission_success",form_type:(null===t||void 0===t?void 0:t.form_type)||"unknown",submission_mode:(null===t||void 0===t?void 0:t.mode)||"unknown",timestamp:(new Date).toISOString()})},v=async(e,t,o)=>{try{const n="queue_".concat(o,"_").concat(Date.now()),s={endpoint:e,data:t,formType:o,timestamp:(new Date).toISOString(),retryCount:0};return await l(n,s),console.log("Form submission queued for retry:",n),n}catch(n){return console.error("Failed to queue form submission:",n),null}},R=async()=>{if(A())try{const o=(await function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:i())("readonly",e=>{if(e.getAllKeys)return s(e.getAllKeys());const t=[];return d(e,e=>t.push(e.key)).then(()=>t)})}()).filter(e=>"string"===typeof e&&e.startsWith("queue_"));if(0===o.length)return void console.log("No queued submissions to flush");console.log("Flushing ".concat(o.length," queued submissions..."));for(const n of o)try{const t=await c(n);if(!t)continue;t.retryCount=(t.retryCount||0)+1;const o=await S(t.endpoint,t.data,{retries:1});var e;if(o.success&&"network"===o.mode)await u(n),console.log("\u2705 Queued submission successful:",n),null!==(e=window)&&void 0!==e&&e.dataLayer&&window.dataLayer.push({event:"queued_form_submit_success",form_type:t.formType,queue_key:n,retry_count:t.retryCount});else t.retryCount>=3?(await u(n),console.warn("\u274c Max retries reached for queued submission:",n)):(await l(n,t),console.log("\ud83d\udd04 Queued submission failed, will retry later:",n))}catch(t){console.error("Error processing queued submission:",n,t)}}catch(t){console.error("Error flushing queued submissions:",t)}else console.log("Still offline, skipping queue flush")};A()&&setTimeout(R,2e3),window.addEventListener("online",()=>{console.log("Browser came online, flushing queued submissions..."),setTimeout(R,1e3)}),setInterval(()=>{A()&&R()},3e5),(()=>{if("undefined"!==typeof window){window.dashboardConfig=(0,n.A)((0,n.A)({},window.dashboardConfig),{},{mock:!1,localDataMode:!1,fallback:!1,testMode:!1});try{localStorage.removeItem("dashboard_mock_mode"),localStorage.removeItem("dashboard_test_mode"),localStorage.removeItem("local_data_mode")}catch(e){console.warn("Could not clear localStorage flags:",e)}}console.log("\ud83c\udfaf Dashboard configured for LIVE mode - all submissions will go to production")})()}}]);
//# sourceMappingURL=554.83935649.chunk.js.map