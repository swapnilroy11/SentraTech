"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[17],{5017:(e,t,o)=>{o.d(t,{DASHBOARD_CONFIG:()=>d,generateOfflineResponse:()=>w,hasNetwork:()=>p,logPayload:()=>u,safeSubmit:()=>c,showSuccessMessage:()=>g,submitChatMessageWithRateLimit:()=>T,submitFormToDashboard:()=>_,submitFormWithRateLimit:()=>A});var n=o(9379),a=o(7540);const s={"demo-request":5e3,"roi-calculator":1e4,newsletter:3e3,"contact-sales":5e3,"job-application":7e3,"pilot-request":5e3,"chat-message":3e3},r={},i={},c=async function(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{disableDuration:n=5e3,onSubmitStart:a=null,onSubmitEnd:s=null,onDuplicate:r=null}=o;if(i[e])return console.warn("\u26a0\ufe0f ".concat(e," is already submitting. Blocking duplicate submission.")),r&&r(),{success:!1,reason:"duplicate_submission",message:"Form is already being submitted"};i[e]=!0,a&&a();try{return await A(e,t)}catch(c){throw console.error("\u274c ".concat(e," submission error:"),c),c}finally{setTimeout(()=>{i[e]=!1,s&&s()},n)}},l="https://tech-site-boost.preview.emergentagent.com";const u=(e,t)=>{},d={ENDPOINTS:{CONTACT_SALES:"/api/proxy/contact-sales",DEMO_REQUEST:"/api/proxy/demo-request",ROI_CALCULATOR:"/api/proxy/roi-calculator",NEWSLETTER:"/api/proxy/newsletter-signup",JOB_APPLICATION:"/api/proxy/job-application",PILOT_REQUEST:"/api/proxy/pilot-request",CHAT_MESSAGE:"/api/proxy/chat-message"},HEALTHCHECK_URL:"/api/health",DASHBOARD_API:{BASE_URL:"https://sentratech.net/api/proxy",ENDPOINTS:{CONTACT_SALES:"/forms/contact-sales",DEMO_REQUEST:"/forms/demo-request",ROI_CALCULATOR:"/forms/roi-calculator",NEWSLETTER:"/forms/newsletter-signup",JOB_APPLICATION:"/forms/job-application",PILOT_REQUEST:"/forms/pilot-request",CHAT_MESSAGE:"/chat/message"}},INGEST_KEY:"a0d3f2b6c9e4d1784a92f3c1b5e6d0aa7c18e2f49b35c6d7e8f0a1b2c3d4e5f6",TIMEOUT:{DEFAULT:1e4,CHAT:15e3},RETRY:{MAX_ATTEMPTS:2,DELAY:1e3}},m=async()=>{var e;const t=[window.location.origin,(null===(e="https://tech-site-boost.preview.emergentagent.com")?void 0:e.replace("/api",""))||"https://sentratech.net","http://localhost:3000","http://localhost",null];for(const n of t)try{const e={"Cache-Control":"no-cache",Pragma:"no-cache"};n&&(e.Origin=n);await fetch("".concat(l,"/health"),{method:"GET",cache:"no-cache",headers:e})}catch(o){console.error('\u274c Origin "'.concat(n,'": ').concat(o.message))}try{await fetch("".concat(l,"/forms/newsletter-signup"),{method:"OPTIONS",headers:{Origin:window.location.origin,"Access-Control-Request-Method":"POST","Access-Control-Request-Headers":"content-type,origin"}})}catch(o){console.error("\u274c CORS Preflight failed:",o.message)}if("serviceWorker"in navigator){await navigator.serviceWorker.getRegistrations()}return!0},p=async()=>{try{var e,t;await m();const o=new AbortController,n=setTimeout(()=>o.abort(),5e3),a=window.location.origin,s=(a.includes("localhost"),null===(e="https://tech-site-boost.preview.emergentagent.com")||e.replace("/api",""),"undefined"!==typeof process&&null!==(t={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BACKEND_URL:"https://tech-site-boost.preview.emergentagent.com",REACT_APP_API_BASE:"https://sentratech.net/api/proxy",REACT_APP_WS_URL:"wss://admin.sentratech.net/ws",REACT_APP_SITE_DOMAIN:"sentratech.net",REACT_APP_SITE_BASEURL:"/",REACT_APP_API_DEV_URL:"http://localhost:8001",REACT_APP_SUPABASE_URL:"https://placeholder.supabase.co",REACT_APP_SUPABASE_ANON_KEY:"placeholder-anon-key"})&&void 0!==t&&t.REACT_APP_BACKEND_URL?"https://tech-site-boost.preview.emergentagent.com":window.location.origin),r="".concat(s).concat(d.HEALTHCHECK_URL),i=await fetch(r,{method:"GET",cache:"no-cache",signal:o.signal,headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Origin:a}});clearTimeout(n);return i.ok||i.status>=400&&i.status<500}catch(o){return!1}},h=()=>(console.warn("\u26a0\ufe0f isOnline() is deprecated - use hasNetwork() for reliable connectivity detection"),navigator.onLine),_=async function(e,t){var o,a,s,r;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{timeout:c=d.TIMEOUT.DEFAULT,retries:l=d.RETRY.MAX_ATTEMPTS}=i,u="undefined"!==typeof process&&null!==(o={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BACKEND_URL:"https://tech-site-boost.preview.emergentagent.com",REACT_APP_API_BASE:"https://sentratech.net/api/proxy",REACT_APP_WS_URL:"wss://admin.sentratech.net/ws",REACT_APP_SITE_DOMAIN:"sentratech.net",REACT_APP_SITE_BASEURL:"/",REACT_APP_API_DEV_URL:"http://localhost:8001",REACT_APP_SUPABASE_URL:"https://placeholder.supabase.co",REACT_APP_SUPABASE_ANON_KEY:"placeholder-anon-key"})&&void 0!==o&&o.REACT_APP_BACKEND_URL?"https://tech-site-boost.preview.emergentagent.com":window.location.origin;let m=null;for(let n=1;n<=l;n++)try{const o=new AbortController,a=setTimeout(()=>o.abort(),c),s="".concat(u).concat(e),r=window.location.origin,i=await fetch(s,{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json",Origin:r},body:JSON.stringify(t),signal:o.signal});if(clearTimeout(a),!i.ok){const e=await i.text();throw console.error("\u274c HTTP Error ".concat(i.status,":"),e),new Error("HTTP ".concat(i.status,": ").concat(i.statusText," - ").concat(e))}return{success:!0,data:await i.json(),mode:"network",attempt:n}}catch(h){m=h,console.error("\u274c Network submission attempt ".concat(n,"/").concat(l," failed:"),{error:h.message,name:h.name,stack:h.stack}),n<l&&await new Promise(e=>setTimeout(e,d.RETRY.DELAY))}console.error("\ud83d\udea8 NETWORK SUBMISSION FAILED - All attempts failed:",{endpoint:e,attempts:l,lastError:null===(a=m)||void 0===a?void 0:a.message,stack:null===(s=m)||void 0===s?void 0:s.stack,data:JSON.stringify(t,null,2)});const p=await f(e,t,i.formType||"unknown");return{success:!0,data:(0,n.A)((0,n.A)({},t),{},{id:"fallback_".concat(Date.now()),queueKey:p}),mode:"fallback",error:null===(r=m)||void 0===r?void 0:r.message}},A=async function(e,t){var o;let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=Date.now(),c="".concat(e,"_").concat(t.email||"anon"),l=null!==(o=s[e])&&void 0!==o?o:5e3;if(r[c]&&i-r[c]<l){const t=Math.ceil((l-(i-r[c]))/1e3);return console.warn("\u26a0\ufe0f ".concat(e," rate limited: please wait ").concat(t,"s before submitting again")),{success:!1,reason:"rate_limited",remainingTime:t,message:"Please wait ".concat(t," seconds before submitting again")}}r[c]=i;const u={"demo-request":d.ENDPOINTS.DEMO_REQUEST,"roi-calculator":d.ENDPOINTS.ROI_CALCULATOR,newsletter:d.ENDPOINTS.NEWSLETTER,"contact-sales":d.ENDPOINTS.CONTACT_SALES,"job-application":d.ENDPOINTS.JOB_APPLICATION,"pilot-request":d.ENDPOINTS.PILOT_REQUEST,"chat-message":d.ENDPOINTS.CHAT_MESSAGE}[e];if(!u)return console.error("\u274c Unknown form type: ".concat(e)),{success:!1,reason:"invalid_form_type",message:"Unknown form type: ".concat(e)};try{return await _(u,t,(0,n.A)((0,n.A)({},a),{},{formType:e}))}catch(m){throw delete r[c],m}},T=async function(e){var t;let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=Date.now(),a="chat-message_".concat(o||"anon"),i=null!==(t=s["chat-message"])&&void 0!==t?t:3e3;if(r[a]&&n-r[a]<i){const e=Math.ceil((i-(n-r[a]))/1e3);return console.warn("\u26a0\ufe0f Chat rate limited: please wait ".concat(e,"s before sending another message")),{success:!1,reason:"rate_limited",remainingTime:e,message:"Please wait ".concat(e," seconds before sending another message")}}r[a]=n;try{return await E(e,o)}catch(c){throw delete r[a],c}},E=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{if(!await p())return console.warn("\ud83c\udf10 Chat: Network connectivity probe failed - using offline response"),w(e)}catch(n){return console.warn("\ud83c\udf10 Chat: Network probe error - using offline response:",n.message),w(e)}try{var o;const n=new AbortController,a=setTimeout(()=>n.abort(),d.TIMEOUT.CHAT),s="undefined"!==typeof process&&null!==(o={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BACKEND_URL:"https://tech-site-boost.preview.emergentagent.com",REACT_APP_API_BASE:"https://sentratech.net/api/proxy",REACT_APP_WS_URL:"wss://admin.sentratech.net/ws",REACT_APP_SITE_DOMAIN:"sentratech.net",REACT_APP_SITE_BASEURL:"/",REACT_APP_API_DEV_URL:"http://localhost:8001",REACT_APP_SUPABASE_URL:"https://placeholder.supabase.co",REACT_APP_SUPABASE_ANON_KEY:"placeholder-anon-key"})&&void 0!==o&&o.REACT_APP_BACKEND_URL?"https://tech-site-boost.preview.emergentagent.com":window.location.origin,r="".concat(s).concat(d.ENDPOINTS.CHAT_MESSAGE),i=await fetch(r,{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json",Origin:window.location.origin},body:JSON.stringify({message:e,conversation_id:t,timestamp:(new Date).toISOString()}),signal:n.signal});if(clearTimeout(a),!i.ok)throw new Error("HTTP ".concat(i.status,": ").concat(i.statusText));const c=await i.json();return{success:!0,response:c.response,conversationId:c.conversation_id,mode:"network"}}catch(a){return console.warn("Chat network submission failed, using offline response:",a.message),w(e)}},w=e=>{const t=["Thank you for your message! Our AI system will help you find the right solution. Since we're currently offline, here's some general guidance.","I understand you're looking for information about SentraTech. While our full AI system is temporarily unavailable, I can share that we specialize in intelligent customer support automation.","Thanks for reaching out! SentraTech offers AI-powered customer support solutions that can transform your business operations. Our team will follow up with detailed information soon.","I appreciate your interest in our services. SentraTech provides cutting-edge AI solutions for customer support, including automated triage, sentiment analysis, and intelligent routing.","Hello! While our real-time AI system is momentarily offline, I want you to know that SentraTech helps businesses automate up to 70% of their customer interactions while maintaining quality."],o=e.toLowerCase();let n=t[0];return n=o.includes("pricing")||o.includes("cost")||o.includes("price")?"For pricing information, please check our pricing page or contact our sales team. We offer flexible plans starting from our Starter package.":o.includes("demo")||o.includes("trial")?"I'd love to show you a demo! Please fill out our demo request form and our team will schedule a personalized walkthrough of SentraTech's capabilities.":o.includes("integration")||o.includes("api")?"SentraTech integrates seamlessly with popular CRMs, help desk systems, and communication platforms. Our API documentation and integration team make setup straightforward.":o.includes("support")||o.includes("help")?"Our support team is here to help! You can reach us through live chat, email at support@sentratech.net, or phone. We offer 24/7 support for Enterprise customers.":t[Math.floor(Math.random()*t.length)],{success:!0,response:n,conversationId:"offline_".concat(Date.now()),mode:"offline"}},g=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;window&&window.dataLayer&&window.dataLayer.push({event:"form_submission_success",form_type:(null===t||void 0===t?void 0:t.form_type)||"unknown",submission_mode:(null===t||void 0===t?void 0:t.mode)||"unknown",timestamp:(new Date).toISOString()})},f=async(e,t,o)=>{try{const n="queue_".concat(o,"_").concat(Date.now()),s={endpoint:e,data:t,formType:o,timestamp:(new Date).toISOString(),retryCount:0};return await(0,a.hZ)(n,s),n}catch(n){return console.error("Failed to queue form submission:",n),null}},S=async()=>{if(h())try{const o=(await(0,a.HP)()).filter(e=>"string"===typeof e&&e.startsWith("queue_"));if(0===o.length)return;for(const n of o)try{const t=await(0,a.Jt)(n);if(!t)continue;t.retryCount=(t.retryCount||0)+1;const o=await _(t.endpoint,t.data,{retries:1});var e;if(o.success&&"network"===o.mode)await(0,a.yH)(n),null!==(e=window)&&void 0!==e&&e.dataLayer&&window.dataLayer.push({event:"queued_form_submit_success",form_type:t.formType,queue_key:n,retry_count:t.retryCount});else t.retryCount>=3?(await(0,a.yH)(n),console.warn("\u274c Max retries reached for queued submission:",n)):await(0,a.hZ)(n,t)}catch(t){console.error("Error processing queued submission:",n,t)}}catch(t){console.error("Error flushing queued submissions:",t)}};h()&&setTimeout(S,2e3),window.addEventListener("online",()=>{setTimeout(S,1e3)}),setInterval(()=>{h()&&S()},3e5),(()=>{if("undefined"!==typeof window){window.dashboardConfig=(0,n.A)((0,n.A)({},window.dashboardConfig),{},{mock:!1,localDataMode:!1,fallback:!1,testMode:!1});try{localStorage.removeItem("dashboard_mock_mode"),localStorage.removeItem("dashboard_test_mode"),localStorage.removeItem("local_data_mode")}catch(e){console.warn("Could not clear localStorage flags:",e)}}})()}}]);
//# sourceMappingURL=17.d727730b.chunk.js.map